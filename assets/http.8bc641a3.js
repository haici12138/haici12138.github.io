import{a6 as e,x as t,a7 as o,C as s,B as a}from"./index-d94b4424.js";const i={invoke(e){var o;e.url.startsWith("http")||(e.url="https://pcapi-xiaotuxian-front-devtest.itheima.net"+e.url),e.timeout=1e4,e.header={...e.header,"source-client":"miniapp"};const s=t(),a=null==(o=s.profile)?void 0:o.token;console.log(s,"memberStore"),console.log(a,"token"),a&&(e.header.Authorization=a)}};e("request",i),e("uploadFile",i);const n=e=>new Promise(((i,n)=>{o({...e,success(e){if(e.statusCode>=200&&e.statusCode<300)i(e.data);else if(401==e.statusCode){t().clearProfile(),s({url:"/pages/login/login"}),n(e)}else a({icon:"none",title:e.data.msg||"请求错误"}),n(e)},fail(e){a({icon:"none",title:"网络错误"}),n(e)}})}));export{n as h};
